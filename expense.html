<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Finance Core - Smart Budgeting</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="css/animations.css" />
  <link rel="stylesheet" href="css/components.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
  <header class="container header-row animate-fade-in-down">
    <div>
      <h1 style="color:#00f3ff; font-size: 2rem;">Finance Core</h1>
      <p class="muted">Intelligent Budgeting.</p>
    </div>

    <div class="topbar">
      <div id="user-info" class="user-info">
        <img id="user-photo" class="user-photo" src="" alt="User" />
        <span id="user-name" class="muted"></span>
      </div>
    </div>

    <nav class="nav-links">
      <a href="index.html">ğŸ  Hub</a>
      <a href="habit.html">ğŸ”¥ Habits</a>
    </nav>
  </header>

  <main class="container">
    <!-- Financial Analytics -->
    <section id="finance-analytics" class="card animate-fade-in-up" style="margin-bottom: 20px;">
      <h2 style="margin: 0 0 15px 0; font-size: 1.2rem;">ğŸ“Š Financial Overview</h2>
      <div id="analytics-stats" class="stats-grid" style="margin-bottom: 20px;">
        <!-- Stats will be inserted here -->
      </div>

      <!-- Charts Grid -->
      <div
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
        <div class="chart-container">
          <div class="chart-header">
            <h3 class="chart-title">Spending by Category</h3>
          </div>
          <div style="height: 250px; position: relative;">
            <canvas id="category-chart"></canvas>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-header">
            <h3 class="chart-title">7-Day Trend</h3>
          </div>
          <div style="height: 250px; position: relative;">
            <canvas id="trend-chart"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Transaction Management -->
    <section class="card animate-fade-in-up stagger-1">
      <div class="toggle-group" style="margin-bottom: 20px;">
        <button type="button" id="btn-expense" class="toggle-btn active">Expense</button>
        <button type="button" id="btn-income" class="toggle-btn">Income</button>
      </div>

      <form id="expense-form" class="row" style="gap: 12px;">
        <input type="text" id="expense-desc" placeholder="Source / Description" required autocomplete="off"
          style="flex: 1;" />
        <input type="number" id="expense-amount" placeholder="Amount (â‚¹)" step="0.01" required style="width: 150px;" />
        <button type="submit" class="btn accent hover-lift" style="background:#00f3ff; color:#000;">Add Entry</button>
      </form>

      <div class="card" style="background:rgba(255,255,255,0.01); margin-top: 20px;">
        <h4 style="margin:0 0 10px 0; font-size: 0.85rem; color: var(--muted);">Monthly Budget</h4>
        <div class="row" style="gap: 12px;">
          <input type="number" id="budget-input" placeholder="Set Goal (â‚¹)" step="0.01" style="flex:1" />
          <button id="budget-save" type="button" class="btn secondary hover-scale">Save</button>
        </div>
        <div id="budget-warning" class="alert hidden" style="margin-top:10px;"></div>
      </div>

      <div id="expense-summary" class="summary" style="margin: 20px 0;">
        Today: â‚¹0.00 | Month: â‚¹0.00
      </div>

      <table style="width:100%; border-collapse:collapse; font-size:0.85rem;">
        <thead style="text-align:left; color:var(--muted); border-bottom:1px solid var(--border);">
          <tr>
            <th style="padding:10px;">Type</th>
            <th style="padding:10px;">Desc</th>
            <th style="padding:10px;">Amount</th>
            <th style="padding:10px;">Date</th>
            <th style="padding:10px;"></th>
          </tr>
        </thead>
        <tbody id="expense-table-body"></tbody>
      </table>
    </section>

    <div class="center" style="margin-top:20px;">
      <button id="open-calendar" class="btn secondary hover-lift">ğŸ“… Activity History</button>
    </div>
  </main>

  <!-- AI FAB -->
  <div id="ai-fab" class="ai-fab" style="background:#00f3ff; box-shadow: 0 0 15px rgba(0,243,255,0.4);">
    <span>ğŸ’</span>
  </div>

  <!-- AI CHAT POPUP -->
  <div id="ai-chat-popup" class="ai-chat-popup hidden">
    <div class="ai-chat-header" style="background:rgba(0,243,255,0.1);">
      <div class="row">
        <span>ğŸ’</span>
        <strong style="font-size:0.9rem;">Finance AI</strong>
      </div>
      <button id="ai-close" class="btn ghost" style="font-size:1.2rem; color:var(--muted);">&times;</button>
    </div>
    <div id="ai-chat-body" class="ai-chat-body">
      <div class="msg-ai">Hello! I'm your finance advisor. Ready to optimize your budget?</div>
    </div>
    <div class="ai-chat-footer">
      <input type="text" id="ai-chat-input" placeholder="Ask AI..." autocomplete="off">
      <button id="ai-chat-send" class="btn accent"
        style="background:#00f3ff; color:#000; border-radius:50%; width:36px; height:36px; padding:0;">&rarr;</button>
    </div>
  </div>

  <!-- CALENDAR POPUP -->
  <div id="calendar-overlay" class="overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <button id="cal-prev" class="btn ghost">&larr;</button>
        <h3 id="cal-title" style="margin:0; font-size:1rem;">Month YYYY</h3>
        <button id="cal-next" class="btn ghost">&rarr;</button>
        <button id="cal-close" class="btn ghost" style="font-size:1.2rem;">&times;</button>
      </div>
      <div class="calendar-grid" id="calendar-grid" style="margin-top:20px;"></div>
    </div>
  </div>

  <script type="module" src="expense.js"></script>
</body>

</html>